<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<title>slackrepo - Tests</title>
<link rel="icon" type="image/png" href="/slackrepo/favicon.png">
<link rel="shortcut icon" href="/slackrepo/favicon.ico">
<link rel="stylesheet" type="text/css" href="/slackrepo/slackrepostyle.css">
</head>

<body>

<header>
<h2>Tests</h2>
</header>

<nav>
<h2><a href="index.html">slackrepo</a></h2>
<ul>
<li><a href="news.html">News</a></li>
<li><a href="download.html">Download</a></li>
<li><a href="quickstart.html">Quick start</a></li>
<li><a href="screenshots.html">Screenshots</a></li>
<li><a href="usagenotes.html">Documentation&nbsp;&raquo;</a></li>
<li>
  <ul>
  <li><a href="usagenotes.html">Usage notes</a></li>
  <li><a href="hintfiles.html">Hintfiles</a></li>
  <li><a href="faq.html">FAQ</a></li>
  <li><a href="configuration.html">Configuration</a></li>
  <li><a href="structure.html">Repo structure</a></li>
  <li><b style="color:red">&bull;</b>&nbsp;<a href="tests.html">Tests</a></li>
  <li><a href="links.html">Links</a></li>
  </ul>
</li>
<li><a href="slackrepo.8.html">manpages&nbsp;&raquo;</a></li>
</ul>
</nav>

<div id="main">

<p>The following tests are performed by the <code>lint</code> command, and by the
<code>build</code>, <code>rebuild</code> and <code>update</code>
commands if the <code>--lint</code> control argument is specified.
When any tests fail, warnings are displayed and logged, but building continues.</p>

<h4>prgnam.SlackBuild</h4>

<ul>
<li>Should exist</li>
</ul>

<h4>slack-desc</h4>

<ul>
<li>Should exist</li>
<li>Should have between 1 and 14 lines that start with <code>prgnam:</code></li>
<li>If the handy-ruler exists, it must be aligned correctly and have the correct format</li>
<li>No trailing spaces on <code>prgnam:</code> lines, i.e. no lines should match <code>^prgnam:&lt;sp&gt;&lt;sp&gt;*$</code></li>
<li>No <code>prgnam:</code> lines should have more than 73 chars of description</li>
<li>All other lines must be prefixed by <code>#</code>, or completely empty</li>
</ul>

<h4>prgnam.info</h4>

<ul>
<li>Optional; its existence indicates an SBo-style SlackBuild</li>
<li>Should define PRGNAM, VERSION, HOMEPAGE, DOWNLOAD(_arch), MD5SUM(_arch), REQUIRES, MAINTAINER, EMAIL</li>
<li>Download URLs should work; to test this, the header is retrieved</li>
<li>PRGNAM should be the same as the .info file's name and the .SlackBuild file's name</li>
<li>Each item defined in REQUIRES should exist in the repo</li>
</ul>

<h4>README</h4>

<ul>
<li>Optional; if prgnam.info exists, README should exist</li>
<li>Should not contain long lines &gt;= 80 chars</li>
</ul>

<h4>Package name</h4>

<ul>
<li>Package name should be in form $PRGNAM-$VERSION-$ARCH-$BUILD$TAG.$PKGTYPE</li>
<li>If the slackbuild produces one package, PRGNAM should be the same as the slackbuild's name and should be the same as PRGNAM in the .info file</li>
<li>VERSION should be the same as VERSION in the .info file</li>
<li>ARCH should be i?86 or x86_64 (optionally suffixed with _<i>KNLVER</i>, _<i>LOCALE</i> etc), or noarch</li>
<li>BUILD should be numeric</li>
<li>TAG should be same as the repo's TAG</li>
<li>PKGTYPE should be tgz, txz, tbz or tlz (and should be as set by the caller)</li>
</ul>

<h4>Package contents</h4>

<ul>
<li>Should be tar-1.13 compatible (path prefix should not start with <code>./</code>)</li>
<li>Compression type should correspond to package type suffix</li>
<li>Should only install to (bin)|(boot)|(dev)|(etc)|(lib)|(opt)|(sbin)|(srv)|(usr)|(var)|(install)</li>
<li>should contain install/slack-desc</li>
<li>nothing installed to usr/local</li>
<li>nothing installed to usr/share/man</li>
<li>all manpages gz compressed</li>
<li>should install without error</li>
</ul>

</div>

</body>
</html>
